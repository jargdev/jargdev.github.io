---
import Hero from "../components/Hero.astro";
import PortfolioCard from "../components/PortfolioCard.astro";
import Layout from "../layouts/Layout.astro";
---

<Layout>
	<Hero />
	<div class="px-6 max-w-6xl mx-auto hidden" id="safari-warning">
		<div
			class="bg-gradient-to-r from-orange-100 to-orange-50 border border-orange-200 text-orange-800 px-8 py-6 text-center font-medium shadow-xl rounded-2xl mx-6 mt-8 max-w-5xl relative z-50 backdrop-blur-sm animate-pulse"
		>
			<div class="flex items-center justify-center gap-3 mb-2">
				<div
					class="w-5 h-5 bg-orange-400 rounded-full flex items-center justify-center animate-bounce"
				>
					⚠️
				</div>
				<span class="font-semibold text-[#ff6200]"
					>Safari sometimes has issues rendering sites correctly.</span
				>
			</div>
			<p class="text-sm opacity-90">
				<span class="font-semibold text-[#ff6200]"
					>For the best experience</span
				>, please try another browser like Chrome or Firefox. (unless
				you're on iPhone. Apple doesn't like developers apparently)
			</p>
			<button
				class="mt-3 inline-flex items-center gap-2 bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded-xl font-semibold transition-all duration-300 ease-in-out hover:scale-105 hover:shadow-lg transform"
				onclick="this.parentElement.parentElement.remove(); this.parentElement.classList.add('animate-fade-out')"
			>
				✕ Dismiss
			</button>
		</div>
	</div>

	<section class="px-6 py-20 max-w-6xl mx-auto relative overflow-hidden">
		<div class="absolute inset-0 opacity-20">
			<div
				class="absolute top-20 left-10 w-32 h-32 bg-orange-300 rounded-full blur-xl animate-pulse"
			>
			</div>
			<div
				class="absolute bottom-32 right-20 w-48 h-48 bg-orange-200 rounded-full blur-2xl animate-bounce delay-1000"
			>
			</div>
			<div
				class="absolute top-1/2 left-1/4 w-24 h-24 bg-orange-400 rounded-full blur-lg animate-ping delay-2000"
			>
			</div>
		</div>

		<div class="text-center mb-20 relative z-10">
			<div
				class="inline-block mb-6 p-4 bg-gradient-to-r from-orange-500/10 to-orange-400/10 rounded-2xl backdrop-blur-sm border border-orange-200/50"
			>
				<h1
					class="text-7xl font-black mb-2 bg-gradient-to-r from-[#ff6200] via-[#ff8c42] to-[#ff6200] bg-clip-text text-transparent drop-shadow-2xl animate-gradient-x"
				>
					Hello World!
				</h1>
				<div
					class="w-32 h-1 bg-gradient-to-r from-[#ff6200] to-[#ff8c42] mx-auto rounded-full animate-pulse"
				>
				</div>
			</div>
			<p
				class="text-[#555] text-xl leading-relaxed max-w-3xl mx-auto font-light px-4"
			>
				I'm <span
					class="font-bold text-[#ff6200] bg-gradient-to-r from-orange-400/20 to-orange-500/20 px-4 py-2 rounded-full border border-orange-200/50 backdrop-blur-sm inline-block"
					>jargdev</span
				>, preferably <strong class="text-[#ff6200]">jarg</strong>, and
				welcome to my website! Here you'll find projects I've worked on,
				my interests, and much more. I've been a programmer for
				<span
					class="font-semibold text-[#ff6200] relative inline-block px-2 py-1 bg-orange-50/80 rounded-lg border border-orange-200/50 backdrop-blur-sm"
				>
					<span class="relative z-10">7 years</span>
					<span
						class="absolute -bottom-1 left-0 w-full h-2 bg-gradient-to-r from-[#ff6200] to-[#ff8c42] opacity-70 rounded-b-lg -z-0"
					></span>
				</span>, and I hope to share my knowledge with you and the
				world.
			</p>
		</div>

		<div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
			<div class="group relative">
				<div
					class="relative bg-white/80 backdrop-blur-sm rounded-2xl shadow-2xl p-6 border border-orange-100/50 hover:shadow-orange-500/10 hover:border-orange-200/50 transition-all duration-500 ease-out hover:scale-[1.02]"
				>
					<div
						class="absolute inset-0 bg-gradient-to-br from-orange-500/5 rounded-2xl"
					>
					</div>
					<div class="relative z-10">
						<h3
							class="text-lg font-bold text-[#ff6200] mb-3 flex items-center gap-2"
						>
							<div
								class="w-2 h-2 bg-orange-400 rounded-full animate-ping"
							>
							</div>
							Language Proficiency
						</h3>
						<div class="h-48">
							<canvas
								id="languageChart"
								class="w-full h-full"
								width="400"
								height="200"
								style="max-height: 200px;"></canvas>
						</div>
					</div>
				</div>
			</div>

			<div class="group relative">
				<div
					class="relative bg-white/80 backdrop-blur-sm rounded-2xl shadow-2xl p-6 border border-orange-100/50 hover:shadow-orange-500/10 hover:border-orange-200/50 transition-all duration-500 ease-out hover:scale-[1.02]"
				>
					<div
						class="absolute inset-0 bg-gradient-to-br from-orange-500/5 rounded-2xl"
					>
					</div>
					<div class="relative z-10">
						<h3
							class="text-lg font-bold text-[#ff6200] mb-3 flex items-center gap-2"
						>
							<div
								class="w-2 h-2 bg-orange-400 rounded-full animate-ping"
							>
							</div>
							GitHub Activity
						</h3>
						<div class="h-48 overflow-hidden rounded-xl">
							<img
								class="w-full h-auto max-h-48 object-cover transition-all duration-700 group-hover:scale-105 group-hover:rotate-1"
								src="https://github-readme-stats.vercel.app/api?username=jargdev&hide_border=false&include_all_commits=false&count_private=true&show_icons=true&bg_color=ffffff&text_color=666666&icon_color=ff6200&title_color=666666"
								alt="Github Stats"
								loading="lazy"
							/>
						</div>
					</div>
				</div>
			</div>
		</div>
	</section>

	<section class="px-6 py-20 max-w-6xl mx-auto relative">
		<div class="text-center mb-16 relative z-10">
			<div
				class="inline-block mb-6 p-4 bg-gradient-to-r from-orange-500/10 to-orange-400/10 rounded-2xl backdrop-blur-sm border border-orange-200/50"
			>
				<h2
					class="text-5xl font-black mb-2 bg-gradient-to-r from-[#ff6200] via-[#ff8c42] to-[#ff6200] bg-clip-text text-transparent drop-shadow-2xl animate-gradient-x"
				>
					My Projects
				</h2>
				<div
					class="w-24 h-1 bg-gradient-to-r from-[#ff6200] to-[#ff8c42] mx-auto rounded-full animate-pulse"
				>
				</div>
			</div>
			<p
				class="text-[#555] text-lg leading-relaxed max-w-2xl mx-auto font-light px-4"
			>
				Explore some of the projects I've worked on, showcasing my
				skills in programming and design. More to come!
			</p>
		</div>

		<div class="relative z-10">
			<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
				<PortfolioCard
					background="/projects/openwheels/bg.png"
					middleground="/projects/openwheels/logo.png"
					foreground="/projects/openwheels/char.png"
					link="/projects/openwheels"
				/>
			</div>
		</div>

		<div
			class="absolute top-20 right-10 w-20 h-20 bg-gradient-to-br from-orange-400/20 to-orange-500/20 rounded-full blur-xl animate-float"
		>
		</div>
		<div
			class="absolute bottom-20 left-10 w-16 h-16 bg-gradient-to-br from-orange-300/30 to-orange-400/30 rounded-full blur-lg animate-float delay-1000"
		>
		</div>
	</section>
</Layout>

<style>
	@keyframes gradient-x {
		0%,
		100% {
			background-position: 0% 50%;
		}
		50% {
			background-position: 100% 50%;
		}
	}
	@keyframes float {
		0%,
		100% {
			transform: translateY(0px) rotate(0deg);
		}
		50% {
			transform: translateY(-20px) rotate(5deg);
		}
	}
	@keyframes fade-out {
		from {
			opacity: 1;
			transform: scale(1);
		}
		to {
			opacity: 0;
			transform: scale(0.95);
		}
	}
	.animate-gradient-x {
		background-size: 200% 200%;
		animation: gradient-x 3s ease infinite;
	}
	.animate-bounce-slow {
		animation: bounce 2s infinite;
	}
	.animate-float {
		animation: float 6s ease-in-out infinite;
	}
</style>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script type="module">
	const isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);

	if (isSafari && !sessionStorage.getItem("safariWarned")) {
		const warning = document.getElementById("safari-warning");
		if (warning) {
			warning.classList.remove("hidden");
			sessionStorage.setItem("safariWarned", "true");
		}
	}

	const ctx = document.getElementById("languageChart")?.getContext("2d");
	if (!ctx) {
		console.warn("Canvas context for languageChart not found");
	} else {
		const data = {
			labels: ["Lua", "Python", "C", "JS/TS"],
			datasets: [
				{
					label: "Years of Experience",
					data: [7, 5, 3.5, 3],
					backgroundColor: [
						"rgba(255, 98, 0, 0.8)",
						"rgba(255, 159, 64, 0.8)",
						"rgba(255, 206, 86, 0.8)",
						"rgba(75, 192, 192, 0.8)",
					],
					borderColor: [
						"rgba(255, 98, 0, 1)",
						"rgba(255, 159, 64, 1)",
						"rgba(255, 206, 86, 1)",
						"rgba(75, 192, 192, 1)",
					],
					borderWidth: 3,
					borderRadius: 12,
					barPercentage: 0.6,
				},
			],
		};

		const config = {
			type: "bar",
			data: data,
			options: {
				responsive: true,
				maintainAspectRatio: true,
				animation: {
					duration: 1200,
					easing: "easeOutQuart",
				},
				plugins: {
					legend: { display: false },
					title: {
						display: true,
						text: "Programming Language Experience",
						color: "#666",
						font: {
							size: 16,
							family: "'Inter', sans-serif",
							weight: "700",
						},
						padding: 10,
					},
					tooltip: {
						backgroundColor: "rgba(0, 0, 0, 0.9)",
						titleColor: "#fff",
						bodyColor: "#fff",
						cornerRadius: 8,
						displayColors: false,
					},
				},
				scales: {
					y: {
						beginAtZero: true,
						title: {
							display: true,
							text: "Years",
							color: "#666",
							font: { size: 12, weight: "600" },
						},
						grid: {
							color: "#f0f0f0",
							lineWidth: 1,
						},
						ticks: {
							color: "#666",
							font: { size: 11, weight: "500" },
							stepSize: 1,
						},
					},
					x: {
						title: {
							display: true,
							text: "Programming Language",
							color: "#666",
							font: { size: 12, weight: "600" },
						},
						grid: { display: false },
						ticks: {
							color: "#666",
							font: { size: 11, weight: "500" },
						},
					},
				},
			},
		};

		new Chart(ctx, config);
	}
</script>
