---
import Hero from "../components/Hero.astro";
import PortfolioCard from "../components/PortfolioCard.astro";
import Layout from "../layouts/Layout.astro";
---

<Layout>
	<Hero />
	<div class="px-6 max-w-6xl mx-auto hidden" id="safari-warning">
		<div
			class="bg-orange-50 border border-orange-200 text-orange-800 px-6 py-4 text-center font-medium shadow-md rounded-xl mx-6 mt-4 max-w-5xl relative z-50"
		>
			⚠️ Safari sometimes has issues rendering sites correctly.
			<span class="font-semibold text-[#ff6200]"
				>For the best experience</span
			>, please try another browser like Chrome or Firefox. (unless you're
			on iphone. apple doesnt like developers apparently)
			<button
				class="ml-3 text-[#ff6200] hover:underline hover:cursor-pointer hover:scale-110 transition duration-300 ease-in-out"
				onclick="this.parentElement.parentElement.remove()"
			>
				Dismiss
			</button>
		</div>
	</div>

	<section class="px-6 py-16 max-w-6xl mx-auto">
		<div class="text-center mb-16">
			<h1
				class="text-7xl font-black mb-8 bg-gradient-to-r from-[#ff6200] to-[#ff8c42] bg-clip-text text-transparent drop-shadow-sm"
			>
				Hello World!
			</h1>
			<p
				class="text-[#555] text-xl leading-relaxed max-w-3xl mx-auto font-light"
			>
				I'm <span
					class="font-semibold text-[#ff6200] bg-orange-50 px-2 py-1 rounded-lg"
					>jargdev</span
				>, preferably <strong class="text-[#ff6200]">jarg</strong>, and
				welcome to my website! Here you'll find projects I've worked on,
				my interests, and much more. I've been a programmer for
				<span class="font-semibold text-[#ff6200] relative">
					<span class="relative z-10">7 years</span>
					<span
						class="absolute bottom-0 left-0 w-full h-2 bg-orange-100 opacity-60 -z-0"
					></span>
				</span>, and I hope to share my knowledge with you and the
				world.
			</p>
		</div>

		<div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
			<div class="group relative">
				<div
					class="relative bg-white rounded-xl shadow-xl p-6 border border-gray-100 hover:shadow-2xl transition-all duration-300"
				>
					<canvas
						id="languageChart"
						class="w-full h-80"
						width="500"
						height="350"></canvas>
				</div>
			</div>

			<div class="group relative">
				<div
					class="relative bg-white rounded-xl shadow-xl p-6 border border-gray-100 hover:shadow-2xl transition-all duration-300"
				>
					<img
						class="w-full h-auto rounded-lg transition-transform duration-500 group-hover:scale-[1.02]"
						src="https://github-readme-stats.vercel.app/api?username=jargdev&hide_border=false&include_all_commits=false&count_private=true&show_icons=true&bg_color=ffffff&text_color=666666&icon_color=ff6200&title_color=666666"
						alt="Github Stats"
						loading="lazy"
					/>
				</div>
			</div>
		</div>
	</section>

	<section class="px-6 py-16 max-w-6xl mx-auto">
		<div class="text-center mb-12">
			<h2
				class="text-5xl font-black mb-6 bg-gradient-to-r from-[#ff6200] to-[#ff8c42] bg-clip-text text-transparent drop-shadow-sm"
			>
				My Projects
			</h2>
			<p
				class="text-[#555] text-lg leading-relaxed max-w-2xl mx-auto font-light"
			>
				Explore some of the projects I've worked on, showcasing my
				skills in programming and design. More to come!
			</p>
		</div>
		<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
			<!-- nobody tell gbd i stole their video
				also they probably fucking hate me anyway because
				i messed with their code 
			-->
			<PortfolioCard
				background="/projects/openwheels/bg.png"
				middleground="/projects/openwheels/logo.png"
				foreground="/projects/openwheels/char.png"
				video="https://www.goodboydigital.com/content/uploads/HappyWheels-CaseStudy.mp4"
				link="/projects/openwheels"
			/>
		</div>
	</section>
</Layout>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script type="module">
	const isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);

	if (isSafari && !sessionStorage.getItem("safariWarned")) {
		const warning = document.getElementById("safari-warning");
		if (warning) {
			warning.classList.remove("hidden");
			sessionStorage.setItem("safariWarned", "true");
		}
	}

	const ctx = document.getElementById("languageChart")?.getContext("2d");
	if (!ctx) {
		console.warn("Canvas context for languageChart not found");
	} else {
		const data = {
			labels: ["Lua", "Python", "C", "JS/TS"],
			datasets: [
				{
					label: "Years of Experience",
					data: [7, 5, 3.5, 3],
					backgroundColor: [
						"rgba(255, 98, 0, 0.8)",
						"rgba(255, 159, 64, 0.8)",
						"rgba(255, 206, 86, 0.8)",
						"rgba(75, 192, 192, 0.8)",
					],
					borderColor: [
						"rgba(255, 98, 0, 1)",
						"rgba(255, 159, 64, 1)",
						"rgba(255, 206, 86, 1)",
						"rgba(75, 192, 192, 1)",
					],
					borderWidth: 3,
					borderRadius: 12,
					barPercentage: 0.6,
				},
			],
		};

		const config = {
			type: "bar",
			data: data,
			options: {
				responsive: true,
				maintainAspectRatio: false,
				animation: {
					duration: 1200,
					easing: "easeOutQuart",
				},
				plugins: {
					legend: { display: false },
					title: {
						display: true,
						text: "Programming Language Experience",
						color: "#666",
						font: {
							size: 20,
							family: "'Inter', sans-serif",
							weight: "700",
						},
						padding: 20,
					},
					tooltip: {
						backgroundColor: "rgba(0, 0, 0, 0.9)",
						titleColor: "#fff",
						bodyColor: "#fff",
						cornerRadius: 8,
						displayColors: false,
					},
				},
				scales: {
					y: {
						beginAtZero: true,
						title: {
							display: true,
							text: "Years",
							color: "#666",
							font: { size: 14, weight: "600" },
						},
						grid: {
							color: "#f0f0f0",
							lineWidth: 2,
						},
						ticks: {
							color: "#666",
							font: { size: 13, weight: "500" },
							stepSize: 1,
						},
					},
					x: {
						title: {
							display: true,
							text: "Programming Language",
							color: "#666",
							font: { size: 14, weight: "600" },
						},
						grid: { display: false },
						ticks: {
							color: "#666",
							font: { size: 14, weight: "500" },
						},
					},
				},
			},
		};

		new Chart(ctx, config);
	}
</script>
